!function(c,f,e){var g,a="sortable",h={drag:true,drop:true,exclude:"",nested:true,vertical:true},n={afterMove:function(t,d){},containerSelector:"ol, ul",distance:0,handle:"",itemSelector:"li",isValidTarget:function(t,d){return true},onCancel:function(t,d,u){},onDrag:function(t,d,u){t.css(d)},onDragStart:function(t,d,u){t.css({height:t.height(),width:t.width()});t.addClass("dragged");c("body").addClass("dragging")},onDrop:function(t,d,u){t.removeClass("dragged").removeAttr("style");c("body").removeClass("dragging")},onMousedown:function(d,u,t){u.preventDefault()},placeholder:'<li class="placeholder"/>',pullPlaceholder:true,serialize:function(v,u,t){var d=c.extend({},v.data());if(t){return u}else{if(u[0]){d.children=u;delete d.subContainer}}delete d.sortable;return d},tolerance:0},q={},k=0;if("ontouchstart" in f){g={start:"touchstart.sortable",end:"touchend.sortable touchcancel.sortable",move:"touchmove.sortable"}}else{g={start:"mousedown.sortable",end:"mouseup.sortable",move:"mousemove.sortable"}}function r(u,t){var d=Math.max(0,u[0]-t[0],t[0]-u[1]),v=Math.max(0,u[2]-t[1],t[1]-u[3]);return d+v}function s(v,u,t){var d=v.slice((t||u)+1||v.length);v.length=u<0?v.length+u:u;return v.push.apply(v,d)}function m(y,w,u){var t=y.length,d=u?"offset":"position";while(t--){var v=y[t].el?y[t].el:c(y[t]),x=v[d]();w[t]=[x.left,x.left+v.outerWidth(true),x.top,x.top+v.outerHeight(true)]}}function b(u,d){var t=d.offset();return{left:u.left-t.left,top:u.top-t.top}}function p(v,x,u){x=[x.left,x.top];u=u&&[u.left,u.top];var w,t=v.length,d=[];while(t--){w=v[t];d[t]=[t,r(w,x),u&&r(w,u)]}d=d.sort(function(z,y){return y[1]-z[1]||y[2]-z[2]||y[0]-z[0]});return d}function o(x,t,y,d){var v=x.find(t),w=v.length;while(w--){var u=v.eq(w).data(a);if(u){u[y](d)}}}function l(d){this.options=c.extend({},n,d);this.containers=[];this.childGroups=[];this.scrolledProxy=c.proxy(this.scrolled,this);this.dragProxy=c.proxy(this.drag,this);this.dropProxy=c.proxy(this.drop,this);if(this.options.parentGroup){this.options.parentGroup.childGroups.push(this)}else{this.placeholder=c(this.options.placeholder);if(!d.isValidTarget){this.options.isValidTarget=e}}}l.get=function(d){if(!q[d.group]){if(!d.group){d.group=k++}q[d.group]=new l(d)}return q[d.group]};l.prototype={dragInit:function(t,d){this.$document=c(d.el[0].ownerDocument);this.toggleListeners("on");this.item=c(t.target).closest(this.options.itemSelector);this.itemContainer=d;this.setPointer(t);this.options.onMousedown(this.item,t,n.onMousedown)},drag:function(w){if(!this.dragging){if(!this.distanceMet(w)){return}o(this.item,this.options.containerSelector,"disable",true);this.options.onDragStart(this.item,this.itemContainer,n.onDragStart);this.item.before(this.placeholder);this.dragging=true}this.setPointer(w);this.options.onDrag(this.item,b(this.pointer,this.item.offsetParent()),n.onDrag);var d=w.pageX,z=w.pageY,v=this.sameResultBox,u=this.options.tolerance;if(!v||v.top-u>z||v.bottom+u<z||v.left-u>d||v.right+u<d){if(!this.searchValidTarget()){this.placeholder.detach()}}},drop:function(d){this.toggleListeners("off");if(this.dragging){if(this.placeholder.closest("html")[0]){this.placeholder.before(this.item).detach()}else{this.options.onCancel(this.item,this.itemContainer,n.onCancel)}this.options.onDrop(this.item,this.getContainer(this.item),n.onDrop);o(this.item,this.options.containerSelector,"enable",true);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=e;this.dragging=false}this.item=e},searchValidTarget:function(y,w){if(!y){y=this.relativePointer||this.pointer;w=this.lastRelativePointer||this.lastPointer}var t=p(this.getContainerDimensions(),y,w),v=t.length;while(v--){var u=t[v][0],z=t[v][1];if(!z||this.options.pullPlaceholder){var d=this.containers[u];if(!this.$getOffsetParent()){var x=d.getItemOffsetParent();y=b(y,x);w=b(w,x)}if(d.searchValidTarget(y,w)){return true}}}},movePlaceholder:function(t,u,w,d){var v=this.lastAppendedItem;if(!d&&v&&v[0]===u[0]){return}u[w](this.placeholder);this.lastAppendedItem=u;this.sameResultBox=d;this.options.afterMove(this.placeholder,t)},getContainerDimensions:function(){if(!this.containerDimensions){m(this.containers,this.containerDimensions=[],!this.$getOffsetParent())}return this.containerDimensions},getContainer:function(d){return d.closest(this.options.containerSelector).data(a)},$getOffsetParent:function(){if(this.offsetParent===e){var d=this.containers.length-1,t=this.containers[d].getItemOffsetParent();if(!this.options.parentGroup){while(d--){if(t[0]!=this.containers[d].getItemOffsetParent()[0]){t=false;break}}}this.offsetParent=t}return this.offsetParent},clearOffsetParent:function(){this.offsetParent=e},setPointer:function(t){var u={left:t.pageX,top:t.pageY};if(this.$getOffsetParent()){var d=b(u,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=d}this.lastPointer=this.pointer;this.pointer=u},distanceMet:function(d){return(Math.max(Math.abs(this.pointer.left-d.pageX),Math.abs(this.pointer.top-d.pageY))>=this.options.distance)},addContainer:function(d){this.containers.push(d)},removeContainer:function(d){var t=c.inArray(d,this.containers);t!==-1&&s(this.containers,t)},scrolled:function(d){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(d){this.$document[d](g.move,this.dragProxy)[d](g.end,this.dropProxy)[d]("scroll.sortable",this.scrolledProxy)},clearDimensions:function(){this.containerDimensions=e;var d=this.containers.length;while(d--){this.containers[d].itemDimensions=e}d=this.childGroups.length;while(d--){this.childGroups[d].clearDimensions()}}};function i(t,d){this.el=t;this.childGroups=[];this.floatRight=false;this.dragInitProxy=c.proxy(this.dragInit,this);this.options=c.extend({},h,d);this.group=l.get(this.options);this.rootGroup=this.options.rootGroup=this.options.rootGroup||this.group;this.parentGroup=this.options.parentGroup=this.options.parentGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;this.enable(true)}i.prototype={dragInit:function(t){var d=this.rootGroup;if(!d.item&&t.which===1&&this.options.drag&&!c(t.target).is(this.options.exclude)){d.dragInit(t,this)}},searchValidTarget:function(d,u){var x=p(this.getItemDimensions(),d,u),v=x.length,y=this.rootGroup,z=!y.options.isValidTarget||y.options.isValidTarget(y.item,this);if(!v&&z){y.movePlaceholder(this,this.el,"append");return true}else{while(v--){var w=x[v][0],t=x[v][1];if(!t&&this.options.nested&&this.getContainerGroup(w)){var A=this.getContainerGroup(w).searchValidTarget(d,u);if(A){return true}}else{if(z){this.movePlaceholder(w,d);return true}}}}},movePlaceholder:function(A,t){var E=c(this.items[A]),z=this.itemDimensions[A],d="after",u=E.outerWidth(),D=E.outerHeight(),y=E.offset(),v={left:y.left,right:y.left+u,top:y.top,bottom:y.top+D};if(this.options.vertical){var C=(z[2]+z[3])/2,B=t.top<=C;if(B){d="before";v.bottom-=D/2}else{v.top+=D/2}}else{var w=(z[0]+z[1])/2,x=t.left<=w;if(x!=this.floatRight){d="before";v.right-=u/2}else{v.left+=u/2}}this.rootGroup.movePlaceholder(this,E,d,v)},getItemDimensions:function(){if(!this.itemDimensions){this.items=this.$getChildren(this.el,"item").filter(":not(.dragged)").get();m(this.items,this.itemDimensions=[])}return this.itemDimensions},getItemOffsetParent:function(){var t,d=this.el;if(d.css("position")==="relative"||d.css("position")==="absolute"||d.css("position")==="fixed"){t=d}else{t=d.offsetParent()}return t},getContainerGroup:function(u){var v=c.data(this.items[u],"subContainer");if(v===e){var t=this.$getChildren(this.items[u],"container");v=false;if(t[0]){var d=c.extend({},this.options,{parentGroup:this.group,group:k++});v=t[a](d).data(a).group}c.data(this.items[u],"subContainer",v)}return v},$getChildren:function(t,d){return c(t).children(this.rootGroup.options[d+"Selector"])},_serialize:function(v,u){var w=this,d=u?"item":"container",t=this.$getChildren(v,d).not(this.options.exclude).map(function(){return w._serialize(c(this),!u)}).get();return this.rootGroup.options.serialize(v,t,u)}};var j={enable:function(d){if(this.options.drop){this.group.addContainer(this)}if(!d){o(this.el,this.options.containerSelector,"enable",true)}this.el.on(g.start,this.handle,this.dragInitProxy)},disable:function(d){if(this.options.drop){this.group.removeContainer(this)}if(!d){o(this.el,this.options.containerSelector,"disable",true)}this.el.off(g.start)},serialize:function(){return this._serialize(this.el,true)}};c.extend(i.prototype,j);c.fn[a]=function(d){var t=Array.prototype.slice.call(arguments,1);return this.map(function(){var v=c(this),u=v.data(a);if(u&&j[d]){return j[d].apply(u,t)||this}else{if(!u&&(d===e||typeof d==="object")){v.data(a,new i(v,d))}}return this})}}(jQuery,window);