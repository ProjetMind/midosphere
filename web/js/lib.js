/*!
 * jQuery Form Plugin
 * version: 3.44.0-2013.09.15
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var i,C,m,o=this;if(typeof j=="function"){j={success:j}}else{if(j===undefined){j={}}}i=j.type||this.attr2("method");C=j.url||this.attr2("action");m=(typeof C==="string")?f.trim(C):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}j=f.extend(true,{url:m,success:f.ajaxSettings.success,type:i||f.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var u={};this.trigger("form-pre-serialize",[this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var n=j.traditional;if(n===undefined){n=f.ajaxSettings.traditional}var s=[];var E,F=this.formToArray(j.semantic,s);if(j.data){j.extraData=j.data;E=f.param(j.data,n)}if(j.beforeSubmit&&j.beforeSubmit(F,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[F,this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=f.param(F,n);if(E){y=(y?(y+"&"+E):E)}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+y;j.data=null}else{j.data=y}var H=[];if(j.resetForm){H.push(function(){o.resetForm()})}if(j.clearForm){H.push(function(){o.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var l=j.success||function(){};H.push(function(q){var k=j.replaceTarget?"replaceWith":"html";f(j.target)[k](q).each(l,arguments)})}else{if(j.success){H.push(j.success)}}j.success=function(K,q,L){var J=j.context||this;for(var I=0,k=H.length;I<k;I++){H[I].apply(J,[K,q,L||o,o])}};if(j.error){var z=j.error;j.error=function(J,k,q){var I=j.context||this;z.apply(I,[J,k,q,o])}}if(j.complete){var h=j.complete;j.complete=function(I,k){var q=j.context||this;h.apply(q,[I,k,o])}}var D=f("input[type=file]:enabled",this).filter(function(){return f(this).val()!==""});var p=D.length>0;var B="multipart/form-data";var x=(o.attr("enctype")==B||o.attr("encoding")==B);var w=c.fileapi&&c.formdata;d("fileAPI :"+w);var r=(p||x)&&!w;var v;if(j.iframe!==false&&(j.iframe||r)){if(j.closeKeepAlive){f.get(j.closeKeepAlive,function(){v=G(F)})}else{v=G(F)}}else{if((p||x)&&w){v=t(F)}else{v=f.ajax(j)}}o.removeData("jqxhr").data("jqxhr",v);for(var A=0;A<s.length;A++){s[A]=null}this.trigger("form-submit-notify",[this,j]);return this;function g(K){var L=f.param(K,j.traditional).split("&");var q=L.length;var k=[];var J,I;for(J=0;J<q;J++){L[J]=L[J].replace(/\+/g," ");I=L[J].split("=");k.push([decodeURIComponent(I[0]),decodeURIComponent(I[1])])}return k}function t(q){var k=new FormData();for(var I=0;I<q.length;I++){k.append(q[I].name,q[I].value)}if(j.extraData){var L=g(j.extraData);for(I=0;I<L.length;I++){if(L[I]){k.append(L[I][0],L[I][1])}}}j.data=null;var K=f.extend(true,{},f.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:i||"POST"});if(j.uploadProgress){K.xhr=function(){var M=f.ajaxSettings.xhr();if(M.upload){M.upload.addEventListener("progress",function(Q){var P=0;var N=Q.loaded||Q.position;var O=Q.total;if(Q.lengthComputable){P=Math.ceil(N/O*100)}j.uploadProgress(Q,N,O,P)},false)}return M}}K.data=null;var J=K.beforeSend;K.beforeSend=function(N,M){M.data=k;if(J){J.call(this,N,M)}};return f.ajax(K)}function G(af){var L=o[0],K,ab,V,ad,Y,N,Q,O,P,Z,ac,T;var ai=f.Deferred();ai.abort=function(aj){O.abort(aj)};if(af){for(ab=0;ab<s.length;ab++){K=f(s[ab]);if(e){K.prop("disabled",false)}else{K.removeAttr("disabled")}}}V=f.extend(true,{},f.ajaxSettings,j);V.context=V.context||V;Y="jqFormIO"+(new Date().getTime());if(V.iframeTarget){N=f(V.iframeTarget);Z=N.attr2("name");if(!Z){N.attr2("name",Y)}else{Y=Z}}else{N=f('<iframe name="'+Y+'" src="'+V.iframeSrc+'" />');N.css({position:"absolute",top:"-1000px",left:"-1000px"})}Q=N[0];O={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var ak=(aj==="timeout"?"timeout":"aborted");d("aborting upload... "+ak);this.aborted=1;try{if(Q.contentWindow.document.execCommand){Q.contentWindow.document.execCommand("Stop")}}catch(al){}N.attr("src",V.iframeSrc);O.error=ak;if(V.error){V.error.call(V.context,O,ak,aj)}if(ad){f.event.trigger("ajaxError",[O,V,ak])}if(V.complete){V.complete.call(V.context,O,ak)}}};ad=V.global;if(ad&&0===f.active++){f.event.trigger("ajaxStart")}if(ad){f.event.trigger("ajaxSend",[O,V])}if(V.beforeSend&&V.beforeSend.call(V.context,O,V)===false){if(V.global){f.active--}ai.reject();return ai}if(O.aborted){ai.reject();return ai}P=L.clk;if(P){Z=P.name;if(Z&&!P.disabled){V.extraData=V.extraData||{};V.extraData[Z]=P.value;if(P.type=="image"){V.extraData[Z+".x"]=L.clk_x;V.extraData[Z+".y"]=L.clk_y}}}var U=1;var R=2;function S(al){var ak=null;try{if(al.contentWindow){ak=al.contentWindow.document}}catch(aj){d("cannot get iframe.contentWindow document: "+aj)}if(ak){return ak}try{ak=al.contentDocument?al.contentDocument:al.document}catch(aj){d("cannot get iframe.contentDocument: "+aj);ak=al.document}return ak}var J=f("meta[name=csrf-token]").attr("content");var I=f("meta[name=csrf-param]").attr("content");if(I&&J){V.extraData=V.extraData||{};V.extraData[I]=J}function aa(){var al=o.attr2("target"),aj=o.attr2("action");L.setAttribute("target",Y);if(!i||/post/i.test(i)){L.setAttribute("method","POST")}if(aj!=V.url){L.setAttribute("action",V.url)}if(!V.skipEncodingOverride&&(!i||/post/i.test(i))){o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(V.timeout){T=setTimeout(function(){ac=true;X(U)},V.timeout)}function am(){try{var aq=S(Q).readyState;d("state = "+aq);if(aq&&aq.toLowerCase()=="uninitialized"){setTimeout(am,50)}}catch(ar){d("Server abort: ",ar," (",ar.name,")");X(R);if(T){clearTimeout(T)}T=undefined}}var ak=[];try{if(V.extraData){for(var ap in V.extraData){if(V.extraData.hasOwnProperty(ap)){if(f.isPlainObject(V.extraData[ap])&&V.extraData[ap].hasOwnProperty("name")&&V.extraData[ap].hasOwnProperty("value")){ak.push(f('<input type="hidden" name="'+V.extraData[ap].name+'">').val(V.extraData[ap].value).appendTo(L)[0])}else{ak.push(f('<input type="hidden" name="'+ap+'">').val(V.extraData[ap]).appendTo(L)[0])}}}}if(!V.iframeTarget){N.appendTo("body")}if(Q.attachEvent){Q.attachEvent("onload",X)}else{Q.addEventListener("load",X,false)}setTimeout(am,15);try{L.submit()}catch(an){var ao=document.createElement("form").submit;ao.apply(L)}}finally{L.setAttribute("action",aj);if(al){L.setAttribute("target",al)}else{o.removeAttr("target")}f(ak).remove()}}if(V.forceSync){aa()}else{setTimeout(aa,10)}var ag,ah,ae=50,M;function X(ap){if(O.aborted||M){return}ah=S(Q);if(!ah){d("cannot access response document");ap=R}if(ap===U&&O){O.abort("timeout");ai.reject(O,"timeout");return}else{if(ap==R&&O){O.abort("server abort");ai.reject(O,"error","server abort");return}}if(!ah||ah.location.href==V.iframeSrc){if(!ac){return}}if(Q.detachEvent){Q.detachEvent("onload",X)}else{Q.removeEventListener("load",X,false)}var an="success",ar;try{if(ac){throw"timeout"}var am=V.dataType=="xml"||ah.XMLDocument||f.isXMLDoc(ah);d("isXml="+am);if(!am&&window.opera&&(ah.body===null||!ah.body.innerHTML)){if(--ae){d("requeing onLoad callback, DOM not available");setTimeout(X,250);return}}var at=ah.body?ah.body:ah.documentElement;O.responseText=at?at.innerHTML:null;O.responseXML=ah.XMLDocument?ah.XMLDocument:ah;if(am){V.dataType="xml"}O.getResponseHeader=function(aw){var av={"content-type":V.dataType};return av[aw.toLowerCase()]};if(at){O.status=Number(at.getAttribute("status"))||O.status;O.statusText=at.getAttribute("statusText")||O.statusText}var aj=(V.dataType||"").toLowerCase();var aq=/(json|script|text)/.test(aj);if(aq||V.textarea){var ao=ah.getElementsByTagName("textarea")[0];if(ao){O.responseText=ao.value;O.status=Number(ao.getAttribute("status"))||O.status;O.statusText=ao.getAttribute("statusText")||O.statusText}else{if(aq){var ak=ah.getElementsByTagName("pre")[0];var au=ah.getElementsByTagName("body")[0];if(ak){O.responseText=ak.textContent?ak.textContent:ak.innerText}else{if(au){O.responseText=au.textContent?au.textContent:au.innerText}}}}}else{if(aj=="xml"&&!O.responseXML&&O.responseText){O.responseXML=W(O.responseText)}}try{ag=k(O,aj,V)}catch(al){an="parsererror";O.error=ar=(al||an)}}catch(al){d("error caught: ",al);an="error";O.error=ar=(al||an)}if(O.aborted){d("upload aborted");an=null}if(O.status){an=(O.status>=200&&O.status<300||O.status===304)?"success":"error"}if(an==="success"){if(V.success){V.success.call(V.context,ag,"success",O)}ai.resolve(O.responseText,"success",O);if(ad){f.event.trigger("ajaxSuccess",[O,V])}}else{if(an){if(ar===undefined){ar=O.statusText}if(V.error){V.error.call(V.context,O,an,ar)}ai.reject(O,"error",ar);if(ad){f.event.trigger("ajaxError",[O,V,ar])}}}if(ad){f.event.trigger("ajaxComplete",[O,V])}if(ad&&!--f.active){f.event.trigger("ajaxStop")}if(V.complete){V.complete.call(V.context,O,an)}M=true;if(V.timeout){clearTimeout(T)}setTimeout(function(){if(!V.iframeTarget){N.remove()}else{N.attr("src",V.iframeSrc)}O.responseXML=null},100)}var W=f.parseXML||function(aj,ak){if(window.ActiveXObject){ak=new ActiveXObject("Microsoft.XMLDOM");ak.async="false";ak.loadXML(aj)}else{ak=(new DOMParser()).parseFromString(aj,"text/xml")}return(ak&&ak.documentElement&&ak.documentElement.nodeName!="parsererror")?ak:null};var q=f.parseJSON||function(aj){return window["eval"]("("+aj+")")};var k=function(ao,am,al){var ak=ao.getResponseHeader("content-type")||"",aj=am==="xml"||!am&&ak.indexOf("xml")>=0,an=aj?ao.responseXML:ao.responseText;if(aj&&an.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(al&&al.dataFilter){an=al.dataFilter(an,am)}if(typeof an==="string"){if(am==="json"||!am&&ak.indexOf("json")>=0){an=q(an)}else{if(am==="script"||!am&&ak.indexOf("javascript")>=0){f.globalEval(an)}}}return an};return ai}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a)};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(h.target).ajaxSubmit(g)}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}j=g[0]}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,g){var w=[];if(this.length===0){return w}var l=this[0];var p=x?l.getElementsByTagName("*"):l.elements;if(!p){return w}var r,q,o,y,m,t,k;for(r=0,t=p.length;r<t;r++){m=p[r];o=m.name;if(!o||m.disabled){continue}if(x&&l.clk&&m.type=="image"){if(l.clk==m){w.push({name:o,value:f(m).val(),type:m.type});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}continue}y=f.fieldValue(m,true);if(y&&y.constructor==Array){if(g){g.push(m)}for(q=0,k=y.length;q<k;q++){w.push({name:o,value:y[q]})}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m)}var h=m.files;if(h.length){for(q=0;q<h.length;q++){w.push({name:o,value:h[q],type:m.type})}}else{w.push({name:o,value:"",type:m.type})}}else{if(y!==null&&typeof y!="undefined"){if(g){g.push(m)}w.push({name:o,value:y,type:m.type,required:m.required})}}}}if(!x&&l.clk){var s=f(l.clk),u=s[0];o=u.name;if(o&&!u.disabled&&u.type=="image"){w.push({name:o,value:s.val()});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(l,h)}else{l.push(h)}}return l};f.fieldValue=function(g,o){var j=g.name,u=g.type,w=g.tagName.toLowerCase();if(o===undefined){o=true}if(o&&(!j||g.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!g.checked||(u=="submit"||u=="image")&&g.form&&g.form.clk!=g||w=="select"&&g.selectedIndex==-1)){return null}if(w=="select"){var p=g.selectedIndex;if(p<0){return null}var r=[],h=g.options;var l=(u=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var s=m.value;if(!s){s=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value}if(l){return s}r.push(s)}}return r}return f(g).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}})((typeof(jQuery)!="undefined")?jQuery:window.Zepto);
/*! X-editable - v1.5.0 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
!function(d){var c=function(a,e){this.options=d.extend({},d.fn.editableform.defaults,e),this.$div=d(a),this.options.scope||(this.options.scope=this)};c.prototype={constructor:c,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=d(d.fn.editableform.template)},initButtons:function(){var a=this.$form.find(".editable-buttons");a.append(d.fn.editableform.buttons),"bottom"===this.options.showbuttons&&a.addClass("editable-buttons-bottom")},render:function(){this.$loading=d(d.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),d.when(this.input.render()).then(d.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(d.proxy(this.cancel,this)),this.input.error){this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(b){b.preventDefault()})}else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var a=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(a),this.$form.submit(d.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var f,e;this.$form?(f=this.$form.outerWidth(),e=this.$form.outerHeight(),f&&this.$loading.width(f),e&&this.$loading.height(e),this.$form.hide()):(f=this.$loading.parent().width(),f&&this.$loading.width(f)),this.$loading.show()},showForm:function(b){this.$loading.hide(),this.$form.show(),b!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(a){var j,i=this.$form.find(".control-group"),h=this.$form.find(".editable-error-block");if(a===!1){i.removeClass(d.fn.editableform.errorGroupClass),h.removeClass(d.fn.editableform.errorBlockClass).empty().hide()}else{if(a){j=a.split("\n");for(var g=0;g<j.length;g++){j[g]=d("<div>").text(j[g]).html()}a=j.join("<br>")}i.addClass(d.fn.editableform.errorGroupClass),h.addClass(d.fn.editableform.errorBlockClass).html(a).show()}},submit:function(a){a.stopPropagation(),a.preventDefault();var h,g=this.input.input2value();if(h=this.validate(g)){return this.error(h),this.showForm(),void 0}if(!this.options.savenochange&&this.input.value2str(g)==this.input.value2str(this.value)){return this.$div.triggerHandler("nochange"),void 0}var f=this.input.value2submit(g);this.isSaving=!0,d.when(this.save(f)).done(d.proxy(function(i){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,i,g):null;return e===!1?(this.error(!1),this.showForm(!1),void 0):"string"==typeof e?(this.error(e),this.showForm(),void 0):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(g=e.newValue),this.error(!1),this.value=g,this.$div.triggerHandler("save",{newValue:g,submitValue:f,response:i}),void 0)},this)).fail(d.proxy(function(i){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,i,g):"string"==typeof i?i:i.responseText||i.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(a){this.options.pk=d.fn.editableutils.tryParseJson(this.options.pk,!0);var h,g="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,f=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==g&&void 0!==g));return f?(this.showLoading(),h={name:this.options.name||"",value:a,pk:g},"function"==typeof this.options.params?h=this.options.params.call(this.options.scope,h):(this.options.params=d.fn.editableutils.tryParseJson(this.options.params,!0),d.extend(h,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,h):d.ajax(d.extend({url:this.options.url,data:h,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(b){return void 0===b&&(b=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,b):void 0},option:function(f,e){f in this.options&&(this.options[f]=e),"value"===f&&this.setValue(e)},setValue:function(f,e){this.value=e?this.input.str2value(f):f,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},d.fn.editableform=function(b){var a=arguments;return this.each(function(){var j=d(this),i=j.data("editableform"),h="object"==typeof b&&b;i||j.data("editableform",i=new c(this,h)),"string"==typeof b&&i[b].apply(i,Array.prototype.slice.call(a,1))})},d.fn.editableform.Constructor=c,d.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},d.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',d.fn.editableform.loading='<div class="editableform-loading"></div>',d.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',d.fn.editableform.errorGroupClass=null,d.fn.editableform.errorBlockClass="editable-error",d.fn.editableform.engine="jquery"}(window.jQuery),function(b){b.fn.editableutils={inherit:function(e,d){var f=function(){};f.prototype=d.prototype,e.prototype=new f,e.prototype.constructor=e,e.superclass=d.prototype},setCursorPosition:function(e,d){if(e.setSelectionRange){e.setSelectionRange(d,d)}else{if(e.createTextRange){var f=e.createTextRange();f.collapse(!0),f.moveEnd("character",d),f.moveStart("character",d),f.select()}}},tryParseJson:function(e,d){if("string"==typeof e&&e.length&&e.match(/^[\{\[].*[\}\]]$/)){if(d){try{e=new Function("return "+e)()}catch(f){}finally{return e}}else{e=new Function("return "+e)()}}return e},sliceObj:function(a,n,m){var l,k,j={};if(!b.isArray(n)||!n.length){return j}for(var i=0;i<n.length;i++){l=n[i],a.hasOwnProperty(l)&&(j[l]=a[l]),m!==!0&&(k=l.toLowerCase(),a.hasOwnProperty(k)&&(j[l]=a[k]))}return j},getConfigData:function(a){var d={};return b.each(a.data(),function(e,c){("object"!=typeof c||c&&"object"==typeof c&&(c.constructor===Object||c.constructor===Array))&&(d[e]=c)}),d},objectKeys:function(e){if(Object.keys){return Object.keys(e)}if(e!==Object(e)){throw new TypeError("Object.keys called on a non-object")}var d,f=[];for(d in e){Object.prototype.hasOwnProperty.call(e,d)&&f.push(d)}return f},escape:function(a){return b("<div>").text(a).html()},itemsByValue:function(a,n,m){if(!n||null===a){return[]}if("function"!=typeof m){var l=m||"value";m=function(c){return c[l]}}var k=b.isArray(a),j=[],i=this;return b.each(n,function(g,f){if(f.children){j=j.concat(i.itemsByValue(a,f.children,m))}else{if(k){b.grep(a,function(c){return c==(f&&"object"==typeof f?m(f):f)}).length&&j.push(f)}else{var d=f&&"object"==typeof f?m(f):f;a==d&&j.push(f)}}}),j},createInput:function(a){var j,i,h,g=a.type;return"date"===g&&("inline"===a.mode?b.fn.editabletypes.datefield?g="datefield":b.fn.editabletypes.dateuifield&&(g="dateuifield"):b.fn.editabletypes.date?g="date":b.fn.editabletypes.dateui&&(g="dateui"),"date"!==g||b.fn.editabletypes.date||(g="combodate")),"datetime"===g&&"inline"===a.mode&&(g="datetimefield"),"wysihtml5"!==g||b.fn.editabletypes[g]||(g="textarea"),"function"==typeof b.fn.editabletypes[g]?(j=b.fn.editabletypes[g],i=this.sliceObj(a,this.objectKeys(j.defaults)),h=new j(i)):(b.error("Unknown type: "+g),!1)},supportsTransitions:function(){var g=document.body||document.documentElement,f=g.style,j="transition",i=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof f[j]){return !0}j=j.charAt(0).toUpperCase()+j.substr(1);for(var h=0;h<i.length;h++){if("string"==typeof f[i[h]+j]){return !0}}return !1}}}(window.jQuery),function(e){var d=function(g,c){this.init(g,c)},f=function(g,c){this.init(g,c)};d.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(b,a){this.$element=e(b),this.options=e.extend({},e.fn.editableContainer.defaults,a),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",e.proxy(function(){this.destroy()},this)),e(document).data("editable-handlers-attached")||(e(document).on("keyup.editable",function(c){27===c.which&&e(".editable-open").editableContainer("hide")}),e(document).on("click.editable",function(j){var i,h=e(j.target),g=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(e.contains(document.documentElement,j.target)&&!h.is(document)){for(i=0;i<g.length;i++){if(h.is(g[i])||h.parents(g[i]).length){return}}d.prototype.closeOthers(j.target)}}),e(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!e.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}for(var a in this.options){a in this.defaults?this.containerOptions[a]=this.options[a]:this.formOptions[a]=this.options[a]}},tip:function(){return this.container()?this.container().$tip:null},container:function(){var b;return this.containerDataName&&(b=this.$element.data(this.containerDataName))?b:b=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(a){this.$element.addClass("editable-open"),a!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=e("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(b){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving){return this.delayedHide={reason:b},void 0}this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",b||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(b){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(b)},setPosition:function(){},save:function(g,c){this.$element.triggerHandler("save",c),this.hide("save")},option:function(g,c){this.options[g]=c,g in this.containerOptions?(this.containerOptions[g]=c,this.setContainerOption(g,c)):(this.formOptions[g]=c,this.$form&&this.$form.editableform("option",g,c))},setContainerOption:function(g,c){this.call("option",g,c)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(a){e(".editable-open").each(function(i,h){if(h!==a&&!e(h).find(a).length){var g=e(h),b=g.data("editableContainer");b&&("cancel"===b.options.onblur?g.data("editableContainer").hide("onblur"):"submit"===b.options.onblur&&g.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},e.fn.editableContainer=function(b){var a=arguments;return this.each(function(){var n=e(this),m="editableContainer",l=n.data(m),k="object"==typeof b&&b,c="inline"===k.mode?f:d;l||n.data(m,l=new c(this,k)),"string"==typeof b&&l[b].apply(l,Array.prototype.slice.call(a,1))})},e.fn.editableContainer.Popup=d,e.fn.editableContainer.Inline=f,e.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(b){b.handler&&b.handler()}}}(window.jQuery),function(b){b.extend(b.fn.editableContainer.Inline.prototype,b.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=b("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,b.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.editable.defaults,e,d.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!d.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};c.prototype={constructor:c,init:function(){var a,e=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=d.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(d.trim(this.$element.html())),e=!0):(this.options.value=d.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",d.proxy(function(g){if(this.options.disabled||g.preventDefault(),"mouseenter"===this.options.toggle){this.show()}else{var f="click"!==this.options.toggle;this.toggle(f)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":a=!0;break;case"auto":a=!d.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!e;break;default:a=!1}d.when(a?this.render():!0).then(d.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var a=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",a,d.proxy(function(e){var f=d(e.target);f.data("editable")||(f.hasClass(this.options.emptyclass)&&f.empty(),f.editable(this.options).trigger(e))},this))},render:function(b){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,b):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,b):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(a,e){return a&&"object"==typeof a?(d.each(a,d.proxy(function(f,g){this.option(d.trim(f),g)},this)),void 0):(this.options[a]=e,"disabled"===a?e?this.disable():this.enable():("value"===a&&this.setValue(e),this.container&&this.container.option(a,e),this.input.option&&this.input.option(a,e),void 0))},handleEmpty:function(a){this.options.display!==!1&&(this.isEmpty=void 0!==a?a:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===d.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(a){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible")){return}}else{var e=d.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(e),this.$element.on("save.internal",d.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(a)}},hide:function(){this.container&&this.container.hide()},toggle:function(b){this.container&&this.container.tip().is(":visible")?this.hide():this.show(b)},save:function(g,f){if(this.options.unsavedclass){var j=!1;j=j||"function"==typeof this.options.url,j=j||this.options.display===!1,j=j||void 0!==f.response,j=j||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(f.newValue),j?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var i=this.$element,h=i.css("background-color");i.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===h&&(h=""),i.css("background-color",h),i.addClass("editable-bg-transition"),setTimeout(function(){i.removeClass("editable-bg-transition")},1700)},10)}this.setValue(f.newValue,!1,f.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(a,f,e){this.value=f?this.input.str2value(a):a,this.container&&this.container.option("value",this.value),d.when(this.render(e)).then(d.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},d.fn.editable=function(p){var o={},n=arguments,m="editable";switch(p){case"validate":return this.each(function(){var f,h=d(this),g=h.data(m);g&&(f=g.validate())&&(o[g.options.name]=f)}),o;case"getValue":return 2===arguments.length&&arguments[1]===!0?o=this.eq(0).data(m).value:this.each(function(){var e=d(this),f=e.data(m);f&&void 0!==f.value&&null!==f.value&&(o[f.options.name]=f.input.value2submit(f.value))}),o;case"submit":var l,k=arguments[1]||{},b=this,a=this.editable("validate");return d.isEmptyObject(a)?(l=this.editable("getValue"),k.data&&d.extend(l,k.data),d.ajax(d.extend({url:k.url,data:l,type:"POST"},k.ajaxOptions)).success(function(e){"function"==typeof k.success&&k.success.call(b,e,k)}).error(function(){"function"==typeof k.error&&k.error.apply(b,arguments)})):"function"==typeof k.error&&k.error.call(b,a),this}return this.each(function(){var i=d(this),f=i.data(m),e="object"==typeof p&&p;return e&&e.selector?(f=new c(this,e),void 0):(f||i.data(m,f=new c(this,e)),"string"==typeof p&&f[p].apply(f,Array.prototype.slice.call(n,1)),void 0)})},d.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(d){d.fn.editabletypes={};var c=function(){};c.prototype={init:function(a,f,e){this.type=a,this.options=d.extend({},e,f)},prerender:function(){this.$tpl=d(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(a,e){d(e)[this.options.escape?"text":"html"](d.trim(a))},html2value:function(a){return d("<div>").html(a).text()},value2str:function(b){return b},str2value:function(b){return b},value2submit:function(b){return b},value2input:function(b){this.$input.val(b)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(a){return d("<div>").text(a).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(b){void 0!==this.options[b]&&null!==this.options[b]&&this.$input.attr(b,this.options[b])},option:function(f,e){this.options[f]=e}},c.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},d.extend(d.fn.editabletypes,{abstractinput:c})}(window.jQuery),function(d){var c=function(){};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{render:function(){var a=d.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),a.resolve()},function(){this.error=this.options.sourceError,a.resolve()}),a.promise()},html2value:function(){return null},value2html:function(a,l,k,j){var i=d.Deferred(),h=function(){"function"==typeof k?k.call(l,a,this.sourceData,j):this.value2htmlFinal(a,l),i.resolve()};return null===a?h.call(this):this.onSourceReady(h,function(){i.resolve()}),i.promise()},onSourceReady:function(a,n){var m;if(d.isFunction(this.options.source)?(m=this.options.source.call(this.options.scope),this.sourceData=null):m=this.options.source,this.options.sourceCache&&d.isArray(this.sourceData)){return a.call(this),void 0}try{m=d.fn.editableutils.tryParseJson(m,!1)}catch(l){return n.call(this),void 0}if("string"==typeof m){if(this.options.sourceCache){var k,j=m;if(d(document).data(j)||d(document).data(j,{}),k=d(document).data(j),k.loading===!1&&k.sourceData){return this.sourceData=k.sourceData,this.doPrepend(),a.call(this),void 0}if(k.loading===!0){return k.callbacks.push(d.proxy(function(){this.sourceData=k.sourceData,this.doPrepend(),a.call(this)},this)),k.err_callbacks.push(d.proxy(n,this)),void 0}k.loading=!0,k.callbacks=[],k.err_callbacks=[]}var i=d.extend({url:m,type:"get",cache:!1,dataType:"json",success:d.proxy(function(b){k&&(k.loading=!1),this.sourceData=this.makeArray(b),d.isArray(this.sourceData)?(k&&(k.sourceData=this.sourceData,d.each(k.callbacks,function(){this.call()})),this.doPrepend(),a.call(this)):(n.call(this),k&&d.each(k.err_callbacks,function(){this.call()}))},this),error:d.proxy(function(){n.call(this),k&&(k.loading=!1,d.each(k.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);d.ajax(i)}else{this.sourceData=this.makeArray(m),d.isArray(this.sourceData)?(this.doPrepend(),a.call(this)):n.call(this)}},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(d.isArray(this.prependData)||(d.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=d.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),d.isArray(this.prependData)&&d.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(a){var n,m,l,k,j=[];if(!a||"string"==typeof a){return null}if(d.isArray(a)){k=function(f,e){return m={value:f,text:e},n++>=2?!1:void 0};for(var i=0;i<a.length;i++){l=a[i],"object"==typeof l?(n=0,d.each(l,k),1===n?j.push(m):n>1&&(l.children&&(l.children=this.makeArray(l.children)),j.push(l))):j.push({value:l,text:l})}}else{d.each(a,function(f,e){j.push({value:f,text:e})})}return j},option:function(f,e){this.options[f]=e,"source"===f&&(this.sourceData=null),"prepend"===f&&(this.prependData=null)}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),d.fn.editabletypes.list=c}(window.jQuery),function(d){var c=function(b){this.init("text",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),d.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=d('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(d.proxy(function(a){if(!~d.inArray(a.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var e=this;this.t=setTimeout(function(){e.toggleClear(a)},100)}},this)).parent().css("position","relative"),this.$clear.click(d.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var f=this.$input.val().length,e=this.$clear.is(":visible");f&&!e&&this.$clear.show(),!f&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),d.fn.editabletypes.text=c}(window.jQuery),function(d){var c=function(b){this.init("textarea",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(a){a.ctrlKey&&13===a.which&&d(this).closest("form").submit()})},activate:function(){d.fn.editabletypes.text.prototype.activate.call(this)}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),d.fn.editabletypes.textarea=c}(window.jQuery),function(d){var c=function(b){this.init("select",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.list),d.extend(c.prototype,{renderList:function(){this.$input.empty();var a=function(i,h){var g;if(d.isArray(h)){for(var b=0;b<h.length;b++){g={},h[b].children?(g.label=h[b].text,i.append(a(d("<optgroup>",g),h[b].children))):(g.value=h[b].value,h[b].disabled&&(g.disabled=!0),i.append(d("<option>",g).text(h[b].text)))}}return i};a(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&d(this).closest("form").submit()})},value2htmlFinal:function(a,h){var g="",f=d.fn.editableutils.itemsByValue(a,this.sourceData);f.length&&(g=f[0].text),d.fn.editabletypes.abstractinput.prototype.value2html.call(this,g,h)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){d(this).closest("form").submit()})}}),c.defaults=d.extend({},d.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),d.fn.editabletypes.select=c}(window.jQuery),function(d){var c=function(b){this.init("checklist",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.list),d.extend(c.prototype,{renderList:function(){var a;if(this.$tpl.empty(),d.isArray(this.sourceData)){for(var e=0;e<this.sourceData.length;e++){a=d("<label>").append(d("<input>",{type:"checkbox",value:this.sourceData[e].value})).append(d("<span>").text(" "+this.sourceData[e].text)),d("<div>").append(a).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(a){return d.isArray(a)?a.sort().join(d.trim(this.options.separator)):""},str2value:function(a){var f,e=null;return"string"==typeof a&&a.length?(f=new RegExp("\\s*"+d.trim(this.options.separator)+"\\s*"),e=a.split(f)):e=d.isArray(a)?a:[a],e},value2input:function(a){this.$input.prop("checked",!1),d.isArray(a)&&a.length&&this.$input.each(function(g,f){var b=d(f);d.each(a,function(h,e){b.val()==e&&b.prop("checked",!0)})})},input2value:function(){var a=[];return this.$input.filter(":checked").each(function(e,b){a.push(d(b).val())}),a},value2htmlFinal:function(a,j){var i=[],h=d.fn.editableutils.itemsByValue(a,this.sourceData),g=this.options.escape;h.length?(d.each(h,function(f,l){var k=g?d.fn.editableutils.escape(l.text):l.text;i.push(k)}),d(j).html(i.join("<br>"))):d(j).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(a){13===a.which&&d(this).closest("form").submit()})}}),c.defaults=d.extend({},d.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),d.fn.editabletypes.checklist=c}(window.jQuery),function(d){var c=function(b){this.init("password",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.text),d.extend(c.prototype,{value2html:function(a,e){a?d(e).text("[hidden]"):d(e).empty()},html2value:function(){return null}}),c.defaults=d.extend({},d.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),d.fn.editabletypes.password=c}(window.jQuery),function(d){var c=function(b){this.init("email",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.text),c.defaults=d.extend({},d.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),d.fn.editabletypes.email=c}(window.jQuery),function(d){var c=function(b){this.init("url",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.text),c.defaults=d.extend({},d.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),d.fn.editabletypes.url=c}(window.jQuery),function(d){var c=function(b){this.init("tel",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.text),c.defaults=d.extend({},d.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),d.fn.editabletypes.tel=c}(window.jQuery),function(d){var c=function(b){this.init("number",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.text),d.extend(c.prototype,{render:function(){c.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),c.defaults=d.extend({},d.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),d.fn.editabletypes.number=c}(window.jQuery),function(d){var c=function(b){this.init("range",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.number),d.extend(c.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){d(this).siblings("output").text(d(this).val())})},activate:function(){this.$input.focus()}}),c.defaults=d.extend({},d.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),d.fn.editabletypes.range=c}(window.jQuery),function(d){var c=function(b){this.init("time",b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{render:function(){this.setClass()}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),d.fn.editabletypes.time=c}(window.jQuery),function(d){var c=function(f){if(this.init("select2",f,c.defaults),f.select2=f.select2||{},this.sourceData=null,f.placeholder&&(f.select2.placeholder=f.placeholder),!f.select2.tags&&f.source){var b=f.source;d.isFunction(f.source)&&(b=f.source.call(f.scope)),"string"==typeof b?(f.select2.ajax=f.select2.ajax||{},f.select2.ajax.data||(f.select2.ajax.data=function(e){return{query:e}}),f.select2.ajax.results||(f.select2.ajax.results=function(e){return{results:e}}),f.select2.ajax.url=b):(this.sourceData=this.convertSource(b),f.select2.data=this.sourceData)}if(this.options.select2=d.extend({},c.defaults.select2,f.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax" in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var a=this.idFunc||"id";this.idFunc=function(e){return e[a]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(e){return e.text})};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",d.proxy(function(b){this.sourceData=b.items.results},this)),this.isMultiple&&this.$input.on("change",function(){d(this).closest("form").parent().triggerHandler("resize")})},value2html:function(j,i){var h,b="",a=this;this.options.select2.tags?h=j:this.sourceData&&(h=d.fn.editableutils.itemsByValue(j,this.sourceData,this.idFunc)),d.isArray(h)?(b=[],d.each(h,function(f,e){b.push(e&&"object"==typeof e?a.formatSelection(e):e)})):h&&(b=a.formatSelection(h)),b=d.isArray(b)?b.join(this.options.viewseparator):b,c.superclass.value2html.call(this,b,i)},html2value:function(b){return this.options.select2.tags?this.str2value(b,this.options.viewseparator):null},value2input:function(a){if(this.$input.data("select2")?this.$input.val(a).trigger("change",!0):(this.$input.val(a),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var h=this.options.select2.id,g=this.options.select2.formatSelection;if(!h&&!g){var f={id:a,text:d(this.options.scope).text()};this.$input.select2("data",f)}}},input2value:function(){return this.$input.select2("val")},str2value:function(a,j){if("string"!=typeof a||!this.isMultiple){return a}j=j||this.options.select2.separator||d.fn.select2.defaults.separator;var i,h,g;if(null===a||a.length<1){return null}for(i=a.split(j),h=0,g=i.length;g>h;h+=1){i[h]=d.trim(i[h])}return i},autosubmit:function(){this.$input.on("change",function(a,e){e||d(this).closest("form").submit()})},convertSource:function(a){if(d.isArray(a)&&a.length&&void 0!==a[0].value){for(var e=0;e<a.length;e++){void 0!==a[e].value&&(a[e].id=a[e].value,delete a[e].value)}}return a},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),d.fn.editabletypes.select2=c}(window.jQuery),function(d){var c=function(a,e){return this.$element=d(a),this.$element.is("input")?(this.options=d.extend({},d.fn.combodate.defaults,e,this.$element.data()),this.init(),void 0):(d.error("Combodate should be applied to INPUT element"),void 0)};c.prototype={constructor:c,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=d('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",d.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var a=this.options.template;return d.each(this.map,function(b,h){h=h[0];var g=new RegExp(h+"+"),f=h.length>1?h.substring(1,2):h;a=a.replace(g,"{"+f+"}")}),a=a.replace(/ /g,"&nbsp;"),d.each(this.map,function(b,f){f=f[0];var e=f.length>1?f.substring(1,2):f;a=a.replace("{"+e+"}",'<select class="'+b+'"></select>')}),a},initCombos:function(){var a=this;d.each(this.map,function(b){var h,g,f=a.$widget.find("."+b);f.length&&(a["$"+b]=f,h="fill"+b.charAt(0).toUpperCase()+b.slice(1),g=a[h](),a["$"+b].html(a.renderItems(g)))})},initItems:function(f){var e,h=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var g="function"==typeof e[f]?e[f](1,!0,f,!1):e[f];g=g.split(" ").reverse()[0],h.push(["",g])}else{"empty"===this.options.firstItem&&h.push(["",""])}return h},renderItems:function(f){for(var e=[],g=0;g<f.length;g++){e.push('<option value="'+f[g][0]+'">'+f[g][1]+"</option>")}return e.join("\n")},fillDay:function(){var f,e,h=this.initItems("d"),g=-1!==this.options.template.indexOf("DD");for(e=1;31>=e;e++){f=g?this.leadZero(e):e,h.push([e,f])}return h},fillMonth:function(){var h,g,l=this.initItems("M"),k=-1!==this.options.template.indexOf("MMMM"),j=-1!==this.options.template.indexOf("MMM"),i=-1!==this.options.template.indexOf("MM");for(g=0;11>=g;g++){h=k?moment().date(1).month(g).format("MMMM"):j?moment().date(1).month(g).format("MMM"):i?this.leadZero(g+1):g+1,l.push([g,h])}return l},fillYear:function(){var f,e,h=[],g=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--){f=g?e:(e+"").substring(2),h[this.options.yearDescending?"push":"unshift"]([e,f])}return h=this.initItems("y").concat(h)},fillHour:function(){var i,h,n=this.initItems("h"),m=-1!==this.options.template.indexOf("h"),l=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),k=m?1:0,j=m?12:23;for(h=k;j>=h;h++){i=l?this.leadZero(h):h,n.push([h,i])}return n},fillMinute:function(){var f,e,h=this.initItems("m"),g=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep){f=g?this.leadZero(e):e,h.push([e,f])}return h},fillSecond:function(){var f,e,h=this.initItems("s"),g=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep){f=g?this.leadZero(e):e,h.push([e,f])}return h},fillAmpm:function(){var f=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",f?"am":"AM"],["pm",f?"pm":"PM"]]);return e},getValue:function(a){var j,i={},h=this,g=!1;return d.each(this.map,function(f){if("ampm"!==f){var e="day"===f?1:0;return i[f]=h["$"+f]?parseInt(h["$"+f].val(),10):e,isNaN(i[f])?(g=!0,!1):void 0}}),g?"":(this.$ampm&&(i.hour=12===i.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?i.hour:i.hour+12),j=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(j),a=void 0===a?this.options.format:a,null===a?j.isValid()?j:null:j.isValid()?j.format(a):"")},setValue:function(a){function j(e,k){var f={};return e.children("option").each(function(l,o){var n,m=d(o).attr("value");""!==m&&(n=Math.abs(m-k),("undefined"==typeof f.distance||n<f.distance)&&(f={value:m,distance:n}))}),f.value}if(a){var i="string"==typeof a?moment(a,this.options.format):moment(a),h=this,g={};i.isValid()&&(d.each(this.map,function(f,e){"ampm"!==f&&(g[f]=i[e[1]]())}),this.$ampm&&(g.hour>=12?(g.ampm="pm",g.hour>12&&(g.hour-=12)):(g.ampm="am",0===g.hour&&(g.hour=12))),d.each(g,function(f,e){h["$"+f]&&("minute"===f&&h.options.minuteStep>1&&h.options.roundTime&&(e=j(h["$"+f],e)),"second"===f&&h.options.secondStep>1&&h.options.roundTime&&(e=j(h["$"+f],e)),h["$"+f].val(e))}),this.$element.val(i.format(this.options.format)))}},highlight:function(b){b.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(b){return 9>=b?"0"+b:b},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},d.fn.combodate=function(f){var b,a=Array.apply(null,arguments);return a.shift(),"getValue"===f&&this.length&&(b=this.eq(0).data("combodate"))?b.getValue.apply(b,a):this.each(function(){var i=d(this),h=i.data("combodate"),e="object"==typeof f&&f;h||i.data("combodate",h=new c(this,e)),"string"==typeof f&&"function"==typeof h[f]&&h[f].apply(h,a)})},d.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0}}(window.jQuery),function(d){var c=function(a){this.init("combodate",a,c.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),a.combodate=d.fn.editableutils.tryParseJson(a.combodate,!0),this.options.combodate=d.extend({},c.defaults.combodate,a.combodate,{format:this.options.format,template:this.options.template})};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===d.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(b,f){var e=b?b.format(this.options.viewformat):"";c.superclass.value2html.call(this,e,f)},html2value:function(b){return b?moment(b,this.options.viewformat):null},value2str:function(b){return b?b.format(this.options.format):""},str2value:function(b){return b?moment(b,this.options.format):null},value2submit:function(b){return this.value2str(b)},value2input:function(b){this.$input.combodate("setValue",b)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),d.fn.editabletypes.combodate=c}(window.jQuery),function(d){var c=d.fn.editableform.Constructor.prototype.initInput;d.extend(d.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=d(d.fn.editableform.template),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){c.apply(this);var f=null===this.input.options.inputclass||this.input.options.inputclass===!1,b="input-medium",a="text,select,textarea,password,email,url,tel,number,range,time".split(",");~d.inArray(this.input.type,a)&&f&&(this.input.options.inputclass=b,this.input.$input.addClass(b))}}),d.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>',d.fn.editableform.errorGroupClass="error",d.fn.editableform.errorBlockClass=null,d.fn.editableform.engine="bs2"}(window.jQuery),function(b){b.extend(b.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:b.fn.popover&&b(b.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",defaults:b.fn.popover.defaults,initContainer:function(){b.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var a;this.$element.data("template")&&(a=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),a&&this.$element.data("template",a)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(d,c){this.container().options[d]=c},setPosition:function(){!function(){var v,u,t,s,r,q,p,o,n,m,a=this.tip();switch(r="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,v=/in/.test(r),a.removeClass("top right bottom left").css({top:0,left:0,display:"block"}),u=this.getPosition(v),t=a[0].offsetWidth,s=a[0].offsetHeight,r=v?r.split(" ")[1]:r,o={top:u.top+u.height,left:u.left+u.width/2-t/2},p={top:u.top-s,left:u.left+u.width/2-t/2},n={top:u.top+u.height/2-s/2,left:u.left-t},m={top:u.top+u.height/2-s/2,left:u.left+u.width},r){case"bottom":o.top+s>b(window).scrollTop()+b(window).height()&&(r=p.top>b(window).scrollTop()?"top":m.left+t<b(window).scrollLeft()+b(window).width()?"right":n.left>b(window).scrollLeft()?"left":"right");break;case"top":p.top<b(window).scrollTop()&&(r=o.top+s<b(window).scrollTop()+b(window).height()?"bottom":m.left+t<b(window).scrollLeft()+b(window).width()?"right":n.left>b(window).scrollLeft()?"left":"right");break;case"left":n.left<b(window).scrollLeft()&&(r=m.left+t<b(window).scrollLeft()+b(window).width()?"right":p.top>b(window).scrollTop()?"top":p.top>b(window).scrollTop()?"bottom":"right");break;case"right":m.left+t>b(window).scrollLeft()+b(window).width()&&(n.left>b(window).scrollLeft()?r="left":p.top>b(window).scrollTop()?r="top":p.top>b(window).scrollTop()&&(r="bottom"))}switch(r){case"bottom":q=o;break;case"top":q=p;break;case"left":q=n;break;case"right":q=m}a.offset(q).addClass(r).addClass("in")}.call(this.container())}})}(window.jQuery),function(x){function w(){return new Date(Date.UTC.apply(Date,arguments))}function v(a,z){var y,l=x(a).data(),k={},j=new RegExp("^"+z.toLowerCase()+"([A-Z])"),z=new RegExp("^"+z.toLowerCase());for(var i in l){z.test(i)&&(y=i.replace(j,function(d,c){return c.toLowerCase()}),k[y]=l[i])}return k}function u(a){var f={};if(n[a]||(a=a.split("-")[0],n[a])){var e=n[a];return x.each(o,function(d,c){c in e&&(f[c]=e[c])}),f}}var t=function(a,d){this._process_options(d),this.element=x(a),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=x(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,c){return parseInt(c)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};t.prototype={constructor:t,_process_options:function(a){this._o=x.extend({},this._o,a);var h=this.o=x.extend({},this._o),g=h.language;switch(n[g]||(g=g.split("-")[0],n[g]||(g=p.language)),h.language=g,h.startView){case 2:case"decade":h.startView=2;break;case 1:case"year":h.startView=1;break;default:h.startView=0}switch(h.minViewMode){case 1:case"months":h.minViewMode=1;break;case 2:case"years":h.minViewMode=2;break;default:h.minViewMode=0}h.startView=Math.max(h.startView,h.minViewMode),h.weekStart%=7,h.weekEnd=(h.weekStart+6)%7;var f=m.parseFormat(h.format);h.startDate!==-1/0&&(h.startDate=m.parseDate(h.startDate,f,h.language)),1/0!==h.endDate&&(h.endDate=m.parseDate(h.endDate,f,h.language)),h.daysOfWeekDisabled=h.daysOfWeekDisabled||[],x.isArray(h.daysOfWeekDisabled)||(h.daysOfWeekDisabled=h.daysOfWeekDisabled.split(/[,\s]*/)),h.daysOfWeekDisabled=x.map(h.daysOfWeekDisabled,function(b){return parseInt(b,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(f){for(var e,h,g=0;g<f.length;g++){e=f[g][0],h=f[g][1],e.on(h)}},_unapplyEvents:function(f){for(var e,h,g=0;g<f.length;g++){e=f[g][0],h=f[g][1],e.off(h)}},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:x.proxy(this.show,this),keyup:x.proxy(this.update,this),keydown:x.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:x.proxy(this.show,this),keyup:x.proxy(this.update,this),keydown:x.proxy(this.keydown,this)}],[this.component,{click:x.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:x.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:x.proxy(this.click,this)}],[x(window),{resize:x.proxy(this.place,this)}],[x(document),{mousedown:x.proxy(function(b){this.element.is(b.target)||this.element.find(b.target).size()||this.picker.is(b.target)||this.picker.find(b.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(a,h){var g=h||this.date,f=new Date(g.getTime()+60000*g.getTimezoneOffset());this.element.trigger({type:a,date:f,format:x.proxy(function(d){var c=d||this.o.format;return m.formatDate(g,c,this.o.language)},this)})},show:function(b){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),b&&b.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var b=this.getUTCDate();return new Date(b.getTime()+60000*b.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(b){this.setUTCDate(new Date(b.getTime()-60000*b.getTimezoneOffset()))},setUTCDate:function(b){this.date=b,this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):this.component&&this.element.find("input").val(b)},getFormattedDate:function(b){return void 0===b&&(b=this.o.format),m.formatDate(this.date,b,this.o.language)},setStartDate:function(b){this._process_options({startDate:b}),this.update(),this.updateNavArrows()},setEndDate:function(b){this._process_options({endDate:b}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this._process_options({daysOfWeekDisabled:b}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var a=parseInt(this.element.parents().filter(function(){return"auto"!=x(this).css("z-index")}).first().css("z-index"))+10,f=this.component?this.component.parent().offset():this.element.offset(),e=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:f.top+e,left:f.left,zIndex:a})}},_allow_update:!0,update:function(){if(this._allow_update){var d,c=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0] instanceof Date)?(d=arguments[0],c=!0):(d=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=m.parseDate(d,this.o.format,this.o.language),c&&this.setValue(),this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date),this.fill()}},fillDow:function(){var e=this.o.weekStart,d="<tr>";if(this.o.calendarWeeks){var f='<th class="cw">&nbsp;</th>';d+=f,this.picker.find(".datepicker-days thead tr:first-child").prepend(f)}for(;e<this.o.weekStart+7;){d+='<th class="dow">'+n[this.o.language].daysMin[e++%7]+"</th>"}d+="</tr>",this.picker.find(".datepicker-days thead").append(d)},fillMonths:function(){for(var d="",c=0;12>c;){d+='<span class="month">'+n[this.o.language].monthsShort[c++]+"</span>"}this.picker.find(".datepicker-months td").html(d)},setRange:function(a){a&&a.length?this.range=x.map(a,function(b){return b.valueOf()}):delete this.range,this.fill()},getClassNames:function(a){var l=[],k=this.viewDate.getUTCFullYear(),j=this.viewDate.getUTCMonth(),i=this.date.valueOf(),h=new Date;return a.getUTCFullYear()<k||a.getUTCFullYear()==k&&a.getUTCMonth()<j?l.push("old"):(a.getUTCFullYear()>k||a.getUTCFullYear()==k&&a.getUTCMonth()>j)&&l.push("new"),this.o.todayHighlight&&a.getUTCFullYear()==h.getFullYear()&&a.getUTCMonth()==h.getMonth()&&a.getUTCDate()==h.getDate()&&l.push("today"),i&&a.valueOf()==i&&l.push("active"),(a.valueOf()<this.o.startDate||a.valueOf()>this.o.endDate||-1!==x.inArray(a.getUTCDay(),this.o.daysOfWeekDisabled))&&l.push("disabled"),this.range&&(a>this.range[0]&&a<this.range[this.range.length-1]&&l.push("range"),-1!=x.inArray(a.valueOf(),this.range)&&l.push("selected")),l},fill:function(){var R,Q=new Date(this.viewDate),P=Q.getUTCFullYear(),O=Q.getUTCMonth(),N=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,M=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,L=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,K=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf(),this.picker.find(".datepicker-days thead th.datepicker-switch").text(n[this.o.language].months[O]+" "+P),this.picker.find("tfoot th.today").text(n[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(n[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var J=w(P,O-1,28,0,0,0,0),I=m.getDaysInMonth(J.getUTCFullYear(),J.getUTCMonth());J.setUTCDate(I),J.setUTCDate(I-(J.getUTCDay()-this.o.weekStart+7)%7);var H=new Date(J);H.setUTCDate(H.getUTCDate()+42),H=H.valueOf();for(var G,F=[];J.valueOf()<H;){if(J.getUTCDay()==this.o.weekStart&&(F.push("<tr>"),this.o.calendarWeeks)){var E=new Date(+J+86400000*((this.o.weekStart-J.getUTCDay()-7)%7)),D=new Date(+E+86400000*((11-E.getUTCDay())%7)),C=new Date(+(C=w(D.getUTCFullYear(),0,1))+86400000*((11-C.getUTCDay())%7)),B=(D-C)/86400000/7+1;F.push('<td class="cw">'+B+"</td>")}G=this.getClassNames(J),G.push("day");var A=this.o.beforeShowDay(J);void 0===A?A={}:"boolean"==typeof A?A={enabled:A}:"string"==typeof A&&(A={classes:A}),A.enabled===!1&&G.push("disabled"),A.classes&&(G=G.concat(A.classes.split(/\s+/))),A.tooltip&&(R=A.tooltip),G=x.unique(G),F.push('<td class="'+G.join(" ")+'"'+(R?' title="'+R+'"':"")+">"+J.getUTCDate()+"</td>"),J.getUTCDay()==this.o.weekEnd&&F.push("</tr>"),J.setUTCDate(J.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(F.join(""));var l=this.date&&this.date.getUTCFullYear(),k=this.picker.find(".datepicker-months").find("th:eq(1)").text(P).end().find("span").removeClass("active");l&&l==P&&k.eq(this.date.getUTCMonth()).addClass("active"),(N>P||P>L)&&k.addClass("disabled"),P==N&&k.slice(0,M).addClass("disabled"),P==L&&k.slice(K+1).addClass("disabled"),F="",P=10*parseInt(P/10,10);var b=this.picker.find(".datepicker-years").find("th:eq(1)").text(P+"-"+(P+9)).end().find("td");P-=1;for(var a=-1;11>a;a++){F+='<span class="year'+(-1==a?" old":10==a?" new":"")+(l==P?" active":"")+(N>P||P>L?" disabled":"")+'">'+P+"</span>",P+=1}b.html(F)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),d=e.getUTCFullYear(),f=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&d<=this.o.startDate.getUTCFullYear()&&f<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&d>=this.o.endDate.getUTCFullYear()&&f>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&d<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&d>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(D){D.preventDefault();var C=x(D.target).closest("span, td, th");if(1==C.length){switch(C[0].nodeName.toLowerCase()){case"th":switch(C[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var B=m.modes[this.viewMode].navStep*("prev"==C[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,B);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,B)}this.fill();break;case"today":var A=new Date;A=w(A.getFullYear(),A.getMonth(),A.getDate(),0,0,0),this.showMode(-2);var z="linked"==this.o.todayBtn?null:"view";this._setDate(A,z);break;case"clear":var y;this.isInput?y=this.element:this.component&&(y=this.element.find("input")),y&&y.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!C.is(".disabled")){if(this.viewDate.setUTCDate(1),C.is(".month")){var l=1,b=C.parent().find("span").index(C),a=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(b),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(w(a,b,l,0,0,0,0))}else{var a=parseInt(C.text(),10)||0,l=1,b=0;this.viewDate.setUTCFullYear(a),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(w(a,b,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(C.is(".day")&&!C.is(".disabled")){var l=parseInt(C.text(),10)||1,a=this.viewDate.getUTCFullYear(),b=this.viewDate.getUTCMonth();C.is(".old")?0===b?(b=11,a-=1):b-=1:C.is(".new")&&(11==b?(b=0,a+=1):b+=1),this._setDate(w(a,b,l,0,0,0,0))}}}},_setDate:function(e,d){d&&"date"!=d||(this.date=new Date(e)),d&&"view"!=d||(this.viewDate=new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&(f.change(),!this.o.autoclose||d&&"date"!=d||this.hide())},moveMonth:function(D,C){if(!C){return D}var B,A,z=new Date(D.valueOf()),y=z.getUTCDate(),l=z.getUTCMonth(),k=Math.abs(C);if(C=C>0?1:-1,1==k){A=-1==C?function(){return z.getUTCMonth()==l}:function(){return z.getUTCMonth()!=B},B=l+C,z.setUTCMonth(B),(0>B||B>11)&&(B=(B+12)%12)}else{for(var j=0;k>j;j++){z=this.moveMonth(z,C)}B=z.getUTCMonth(),z.setUTCDate(y),A=function(){return B!=z.getUTCMonth()}}for(;A();){z.setUTCDate(--y),z.setUTCMonth(B)}return z},moveYear:function(d,c){return this.moveMonth(d,12*c)},dateWithinRange:function(b){return b>=this.o.startDate&&b<=this.o.endDate},keydown:function(h){if(this.picker.is(":not(:visible)")){return 27==h.keyCode&&this.show(),void 0}var g,l,k,j=!1;switch(h.keyCode){case 27:this.hide(),h.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}g=37==h.keyCode?-1:1,h.ctrlKey?(l=this.moveYear(this.date,g),k=this.moveYear(this.viewDate,g)):h.shiftKey?(l=this.moveMonth(this.date,g),k=this.moveMonth(this.viewDate,g)):(l=new Date(this.date),l.setUTCDate(this.date.getUTCDate()+g),k=new Date(this.viewDate),k.setUTCDate(this.viewDate.getUTCDate()+g)),this.dateWithinRange(l)&&(this.date=l,this.viewDate=k,this.setValue(),this.update(),h.preventDefault(),j=!0);break;case 38:case 40:if(!this.o.keyboardNavigation){break}g=38==h.keyCode?-1:1,h.ctrlKey?(l=this.moveYear(this.date,g),k=this.moveYear(this.viewDate,g)):h.shiftKey?(l=this.moveMonth(this.date,g),k=this.moveMonth(this.viewDate,g)):(l=new Date(this.date),l.setUTCDate(this.date.getUTCDate()+7*g),k=new Date(this.viewDate),k.setUTCDate(this.viewDate.getUTCDate()+7*g)),this.dateWithinRange(l)&&(this.date=l,this.viewDate=k,this.setValue(),this.update(),h.preventDefault(),j=!0);break;case 13:this.hide(),h.preventDefault();break;case 9:this.hide()}if(j){this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change()}},showMode:function(b){b&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+b))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var s=function(a,d){this.element=x(a),this.inputs=x.map(d.inputs,function(b){return b.jquery?b[0]:b}),delete d.inputs,x(this.inputs).datepicker(d).bind("changeDate",x.proxy(this.dateUpdated,this)),this.pickers=x.map(this.inputs,function(c){return x(c).data("datepicker")}),this.updateDates()};s.prototype={updateDates:function(){this.dates=x.map(this.pickers,function(b){return b.date}),this.updateRanges()},updateRanges:function(){var a=x.map(this.dates,function(b){return b.valueOf()});x.each(this.pickers,function(b,d){d.setRange(a)})},dateUpdated:function(a){var j=x(a.target).data("datepicker"),i=j.getUTCDate(),h=x.inArray(a.target,this.inputs),g=this.inputs.length;if(-1!=h){if(i<this.dates[h]){for(;h>=0&&i<this.dates[h];){this.pickers[h--].setUTCDate(i)}}else{if(i>this.dates[h]){for(;g>h&&i>this.dates[h];){this.pickers[h++].setUTCDate(i)}}}this.updateDates()}},remove:function(){x.map(this.pickers,function(b){b.remove()}),delete this.element.data().datepicker}};var r=x.fn.datepicker,q=x.fn.datepicker=function(a){var d=Array.apply(null,arguments);d.shift();var c;return this.each(function(){var g=x(this),f=g.data("datepicker"),e="object"==typeof a&&a;if(!f){var b=v(this,"date"),z=x.extend({},p,b,e),y=u(z.language),i=x.extend({},p,y,b,e);if(g.is(".input-daterange")||i.inputs){var h={inputs:i.inputs||g.find("input").toArray()};g.data("datepicker",f=new s(this,x.extend(i,h)))}else{g.data("datepicker",f=new t(this,i))}}return"string"==typeof a&&"function"==typeof f[a]&&(c=f[a].apply(f,d),void 0!==c)?!1:void 0}),void 0!==c?c:this},p=x.fn.datepicker.defaults={autoclose:!1,beforeShowDay:x.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},o=x.fn.datepicker.locale_opts=["format","rtl","weekStart"];x.fn.datepicker.Constructor=t;var n=x.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(b){return 0===b%4&&0!==b%100||0===b%400},getDaysInMonth:function(d,c){return[31,m.isLeapYear(d)?29:28,31,30,31,30,31,31,30,31,30,31][c]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var d=e.replace(this.validParts,"\0").split("\0"),f=e.match(this.validParts);if(!d||!d.length||!f||0===f.length){throw new Error("Invalid date format.")}return{separators:d,parts:f}},parseDate:function(F,E,D){if(F instanceof Date){return F}if("string"==typeof E&&(E=m.parseFormat(E)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(F)){var C,B,A=/([\-+]\d+)([dmwy])/,z=F.match(/([\-+]\d+)([dmwy])/g);F=new Date;for(var y=0;y<z.length;y++){switch(C=A.exec(z[y]),B=parseInt(C[1]),C[2]){case"d":F.setUTCDate(F.getUTCDate()+B);break;case"m":F=t.prototype.moveMonth.call(t.prototype,F,B);break;case"w":F.setUTCDate(F.getUTCDate()+7*B);break;case"y":F=t.prototype.moveYear.call(t.prototype,F,B)}}return w(F.getUTCFullYear(),F.getUTCMonth(),F.getUTCDate(),0,0,0)}var l,k,C,z=F&&F.match(this.nonpunctuation)||[],F=new Date,e={},b=["yyyy","yy","M","MM","m","mm","d","dd"],a={yyyy:function(d,c){return d.setUTCFullYear(c)},yy:function(d,c){return d.setUTCFullYear(2000+c)},m:function(d,c){for(c-=1;0>c;){c+=12}for(c%=12,d.setUTCMonth(c);d.getUTCMonth()!=c;){d.setUTCDate(d.getUTCDate()-1)}return d},d:function(d,c){return d.setUTCDate(c)}};a.M=a.MM=a.mm=a.m,a.dd=a.d,F=w(F.getFullYear(),F.getMonth(),F.getDate(),0,0,0);var I=E.parts.slice();if(z.length!=I.length&&(I=x(I).filter(function(d,f){return -1!==x.inArray(f,b)}).toArray()),z.length==I.length){for(var y=0,H=I.length;H>y;y++){if(l=parseInt(z[y],10),C=I[y],isNaN(l)){switch(C){case"MM":k=x(n[D].months).filter(function(){var d=this.slice(0,z[y].length),c=z[y].slice(0,d.length);return d==c}),l=x.inArray(k[0],n[D].months)+1;break;case"M":k=x(n[D].monthsShort).filter(function(){var d=this.slice(0,z[y].length),c=z[y].slice(0,d.length);return d==c}),l=x.inArray(k[0],n[D].monthsShort)+1}}e[C]=l}for(var G,y=0;y<b.length;y++){G=b[y],G in e&&!isNaN(e[G])&&a[G](F,e[G])}}return F},formatDate:function(a,z,y){"string"==typeof z&&(z=m.parseFormat(z));var l={d:a.getUTCDate(),D:n[y].daysShort[a.getUTCDay()],DD:n[y].days[a.getUTCDay()],m:a.getUTCMonth()+1,M:n[y].monthsShort[a.getUTCMonth()],MM:n[y].months[a.getUTCMonth()],yy:a.getUTCFullYear().toString().substring(2),yyyy:a.getUTCFullYear()};l.dd=(l.d<10?"0":"")+l.d,l.mm=(l.m<10?"0":"")+l.m;for(var a=[],k=x.extend([],z.separators),j=0,i=z.parts.length;i>=j;j++){k.length&&a.push(k.shift()),a.push(l[z.parts[j]])}return a.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",x.fn.datepicker.DPGlobal=m,x.fn.datepicker.noConflict=function(){return x.fn.datepicker=r,this},x(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(a){var d=x(this);d.data("datepicker")||(a.preventDefault(),q.call(d,"show"))}),x(function(){q.call(x('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(d){d.fn.bdatepicker=d.fn.datepicker.noConflict(),d.fn.datepicker||(d.fn.datepicker=d.fn.bdatepicker);var c=function(b){this.init("date",b,c.defaults),this.initPicker(b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{initPicker:function(a,e){this.options.viewformat||(this.options.viewformat=this.options.format),a.datepicker=d.fn.editableutils.tryParseJson(a.datepicker,!0),this.options.datepicker=d.extend({},e.datepicker,a.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=d.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=d('<a href="#"></a>').html(this.options.clear).click(d.proxy(function(b){b.preventDefault(),b.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(d('<div class="editable-clear">').append(this.$clear)))},value2html:function(b,f){var e=b?this.dpg.formatDate(b,this.parsedViewFormat,this.options.datepicker.language):"";c.superclass.value2html.call(this,e,f)},html2value:function(b){return this.parseDate(b,this.parsedViewFormat)},value2str:function(b){return b?this.dpg.formatDate(b,this.parsedFormat,this.options.datepicker.language):""},str2value:function(b){return this.parseDate(b,this.parsedFormat)},value2submit:function(b){return this.value2str(b)},value2input:function(b){this.$input.bdatepicker("update",b)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(a){if(!d(a.currentTarget).is(".old")&&!d(a.currentTarget).is(".new")){var e=d(this).closest("form");setTimeout(function(){e.submit()},200)}})},parseDate:function(f,e){var h,g=null;return f&&(g=this.dpg.parseDate(f,e,this.options.datepicker.language),"string"==typeof f&&(h=this.dpg.formatDate(g,e,this.options.datepicker.language),f!==h&&(g=null))),g}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),d.fn.editabletypes.date=c}(window.jQuery),function(d){var c=function(b){this.init("datefield",b,c.defaults),this.initPicker(b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.date),d.extend(c.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(d.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(b){this.$input.val(b?this.dpg.formatDate(b,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){d.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),c.defaults=d.extend({},d.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),d.fn.editabletypes.datefield=c}(window.jQuery),function(d){var c=function(b){this.init("datetime",b,c.defaults),this.initPicker(b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.abstractinput),d.extend(c.prototype,{initPicker:function(a,e){this.options.viewformat||(this.options.viewformat=this.options.format),a.datetimepicker=d.fn.editableutils.tryParseJson(a.datetimepicker,!0),this.options.datetimepicker=d.extend({},e.datetimepicker,a.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=d.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var a=d(this).closest("form").parent();setTimeout(function(){a.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=d('<a href="#"></a>').html(this.options.clear).click(d.proxy(function(b){b.preventDefault(),b.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(d('<div class="editable-clear">').append(this.$clear)))},value2html:function(b,f){var e=b?this.dpg.formatDate(this.toUTC(b),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return f?(c.superclass.value2html.call(this,e,f),void 0):e},html2value:function(f){var e=this.parseDate(f,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(b){return b?this.dpg.formatDate(this.toUTC(b),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(f){var e=this.parseDate(f,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(b){return this.value2str(b)},value2input:function(b){b&&this.$input.data("datetimepicker").setDate(b)},input2value:function(){var b=this.$input.data("datetimepicker");return b.date?b.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var a=d(this).closest("form");setTimeout(function(){a.submit()},200)})},toUTC:function(b){return b?new Date(b.valueOf()-60000*b.getTimezoneOffset()):b},fromUTC:function(b){return b?new Date(b.valueOf()+60000*b.getTimezoneOffset()):b},parseDate:function(f,e){var h,g=null;return f&&(g=this.dpg.parseDate(f,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof f&&(h=this.dpg.formatDate(g,e,this.options.datetimepicker.language,this.options.formatType),f!==h&&(g=null))),g}}),c.defaults=d.extend({},d.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),d.fn.editabletypes.datetime=c}(window.jQuery),function(d){var c=function(b){this.init("datetimefield",b,c.defaults),this.initPicker(b,c.defaults)};d.fn.editableutils.inherit(c,d.fn.editabletypes.datetime),d.extend(c.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(d.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(b){this.$input.val(this.value2html(b)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){d.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),c.defaults=d.extend({},d.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),d.fn.editabletypes.datetimefield=c}(window.jQuery),function(d){var c=function(a){this.init("typeahead",a,c.defaults),this.options.typeahead=d.extend({},c.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},a.typeahead)};d.fn.editableutils.inherit(c,d.fn.editabletypes.list),d.extend(c.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]'),this.options.typeahead.source=this.sourceData,this.$input.typeahead(this.options.typeahead);var a=this.$input.data("typeahead");a.render=d.proxy(this.typeaheadRender,a),a.select=d.proxy(this.typeaheadSelect,a),a.move=d.proxy(this.typeaheadMove,a),this.renderClear(),this.setClass(),this.setAttr("placeholder")},value2htmlFinal:function(a,f){if(this.getIsObjects()){var e=d.fn.editableutils.itemsByValue(a,this.sourceData);a=e.length?e[0].text:""}d.fn.editabletypes.abstractinput.prototype.value2html.call(this,a,f)},html2value:function(b){return b?b:null},value2input:function(a){if(this.getIsObjects()){var e=d.fn.editableutils.itemsByValue(a,this.sourceData);this.$input.data("value",a).val(e.length?e[0].text:"")}else{this.$input.val(a)}},input2value:function(){if(this.getIsObjects()){var a=this.$input.data("value"),e=d.fn.editableutils.itemsByValue(a,this.sourceData);return e.length&&e[0].text.toLowerCase()===this.$input.val().toLowerCase()?a:null}return this.$input.val()},getIsObjects:function(){if(void 0===this.isObjects){this.isObjects=!1;for(var b=0;b<this.sourceData.length;b++){if(this.sourceData[b].value!==this.sourceData[b].text){this.isObjects=!0;break}}}return this.isObjects},activate:d.fn.editabletypes.text.prototype.activate,renderClear:d.fn.editabletypes.text.prototype.renderClear,postrender:d.fn.editabletypes.text.prototype.postrender,toggleClear:d.fn.editabletypes.text.prototype.toggleClear,clear:function(){d.fn.editabletypes.text.prototype.clear.call(this),this.$input.data("value","")},matcher:function(a){return d.fn.typeahead.Constructor.prototype.matcher.call(this,a.text)},sorter:function(h){for(var g,l,k=[],j=[],i=[];g=h.shift();){l=g.text,l.toLowerCase().indexOf(this.query.toLowerCase())?~l.indexOf(this.query)?j.push(g):i.push(g):k.push(g)}return k.concat(j,i)},highlighter:function(a){return d.fn.typeahead.Constructor.prototype.highlighter.call(this,a.text)},updater:function(b){return this.$element.data("value",b.value),b.text},typeaheadRender:function(a){var e=this;return a=d(a).map(function(f,g){return f=d(e.options.item).data("item",g),f.find("a").html(e.highlighter(g)),f[0]}),this.options.autoSelect&&a.first().addClass("active"),this.$menu.html(a),this},typeaheadSelect:function(){var b=this.$menu.find(".active").data("item");return(this.options.autoSelect||b)&&this.$element.val(this.updater(b)).change(),this.hide()},typeaheadMove:function(b){if(this.shown){switch(b.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length){return}b.preventDefault();break;case 38:b.preventDefault(),this.prev();break;case 40:b.preventDefault(),this.next()}b.stopPropagation()}}}),c.defaults=d.extend({},d.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:!0}),d.fn.editabletypes.typeahead=c}(window.jQuery);